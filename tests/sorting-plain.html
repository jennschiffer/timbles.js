<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>timbles tests &bull; QUnit</title>
  <link rel="stylesheet" href="qunit-1.15.0.css">
</head>
<body>

  <div id="qunit"></div>
  <div id="qunit-fixture"></div>

  <table id="target" border="1" style=";">
    <thead>
      <tr>
        <th>Name</th>
        <th>CI name</th>
        <th>Text number</th>
        <th>Natural number</th>
        <th>Percentage</th>
      </tr>
    </thead>
    <tr>
      <td>e e cummings</td>
      <td data-value="e e cummings">e e cummings</td>
      <td>11</td>
      <td data-value="11">11</td>
      <td data-value="1">100%</td>
    </tr>
    <tr>
      <td>Arthur fforde</td>
      <td data-value="arthur fforde">Arthur fforde</td>
      <td>120</td>
      <td data-value="120">120</td>
      <td data-value="0.05">5%</td>
    </tr>
    <tr>
      <td>Ezra Pound</td>
      <td data-value="ezra pound">Ezra Pound</td>
      <td>5</td>
      <td data-value="5">5</td>
      <td data-value="0">0%</td>
    </tr>
    <tr>
      <td>Robert Frost</td>
      <td data-value="robert frost">Robert Frost</td>
      <td>500</td>
      <td data-value="500">500</td>
      <td data-value="0.4545">45.45%</td>
    </tr>
    <tr>
      <td>Arthur Rimbaud</td>
      <td data-value="arthur rimbaud">Arthur Rimbaud</td>
      <td>19</td>
      <td data-value="19">19</td>
      <td data-value="-1">N/A</td>
    </tr>
  </table>

<script type="text/javascript" src="../jquery.js"></script>
<script type="text/javascript" src="../timbles.js"></script>

<script type="text/javascript">
$(function() {

  var $table = $('table');

  /* it's going down
      i'm yellin' timbles! */

  $table.timbles({
    sorting: true
  });

});
</script>

  <script src="qunit-1.15.0.js"></script>
  <script>
    var target = $('#target');

    function sortedColumnContent(column_index) {
      // Sorts by the given column and returns an array with the column contents
      target.timbles('sortColumn', column_index, 'asc');
      return target.find('tbody tr').map(function () {
        return $(this).children().eq(column_index).text()
      }).get();
    }

    QUnit.test('Sorting names with case as written', function(assert) {
      var expected = [
          'Arthur Rimbaud',
          'Arthur fforde',
          'Ezra Pound',
          'Robert Frost',
          'e e cummings',
      ];
      assert.deepEqual(sortedColumnContent(0), expected);
    });

    QUnit.test('Sorting names as lowercase data-values', function(assert) {
      var expected = [
          'Arthur fforde',
          'Arthur Rimbaud',
          'e e cummings',
          'Ezra Pound',
          'Robert Frost',
      ];
      assert.deepEqual(sortedColumnContent(1), expected);
    });

    QUnit.test('Sorting numbers lexicographically', function(assert) {
      var expected = ['11', '120', '19', '5', '500'];
      assert.deepEqual(sortedColumnContent(2), expected);
    });

    QUnit.test('Sorting numbers naturally', function(assert) {
      var expected = ['5', '11', '19', '120', '500'];
      assert.deepEqual(sortedColumnContent(3), expected);
    });

    QUnit.test('Sorting reals with zero (percentages)', function(assert) {
      var expected = ['N/A', '0%', '5%', '45.45%', '100%'];
      assert.deepEqual(sortedColumnContent(4), expected);
    });

  </script>

</body>
</html>
